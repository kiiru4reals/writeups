### Introduction
Ever wondered how you can prevent your very precious API keys, Database credentials and many other keys could stop making their way into your GitHub repository? This can be made possible through pre-commit hooks. Pre-commit hooks makes this possible by scanning what you intend to commit and flags any issues before the commit is made. 
Pre-commit hooks is not a really new concept as they have been used by developers to identify issues before code is submitted before code reviews. In interests of shifting left, security teams can use pre-commit hooks to identify secrets before they make their way to a commit. 
### Using gitleaks as a pre-commit hook
To check for secrets before they are pushed to your repository, we can use Git-leaks which is a tool that can be deployed on your CI/CD pipeline, a CLI tool or as a pre-commit hook to check for secrets on your codebase.
To set up gitleaks, we can start by installing pre-commit on our host, this can be done by running the following command:
```sh
pip install pre-commit
```

We can then proceed to verify if pre-commit was installed by running the following command:
```sh
pre-commit --version
```
#### Setting up git-leaks
All pre-commit hooks are stored on `.pre-commit-config.yaml`. Before any commit is made, this file is checked to determine the hooks that are being run. On our YAML file, we can add the following content:
```yaml
repos:
  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.22.0
    hooks:
      - id: gitleaks
```
Once we have added this, we need to install our pre-commit hook using the below command:
```sh
pre-commit install
```
When our pre-commit hook is installed, we can then stage the `.pre-commit-config.yaml` to version control for it to work by using the below command:
```sh
git add .pre-commit-config.yaml
```
Our pre-commit hook is now ready to be used, when we commit our changes our pre-commit hook runs to check if our changes have any secrets. An example is shown below

![[Pasted image 20241226145503.png]]
From the above screenshot you can observe that I attempted to upload an API key. This was flagged and details of the file name and what the secret is have been provided on the report below my commit command. When we remove this file from the staged changes, we get the following output:
![[Pasted image 20241226150131.png]]
### Conclusion
Pre-commit hooks, like Gitleaks, are powerful tools for improving code quality and security. They help catch issues such as secrets, coding errors, or other vulnerabilities before they make it into your repository. Easy to set up and integrate, pre-commit hooks ensure cleaner commits and a more secure, efficient workflow.